// track.js
var TRACKS = [
  {
	//1--------------------------------------------------------------------------  
    name: "Shanghai Circuit",
    bgImage: "track/china-2.png",
    start: { x: 1961, y:1712 },  // 圈數檢測線
    playerStart: { x: 1949, y: 2157, angle: -Math.PI/2 },
    gridPositions: [  // 11個AI車起跑位（可自訂）
      {x:1949, y:1787}, {x:1981, y:1807}, {x:1949, y:1861}, {x:1981, y:1885},
      {x:1949, y:1935}, {x:1981, y:1960}, {x:1949, y:2009}, {x:1981, y:2038},
      {x:1949, y:2083}, {x:1981, y:2108}, {x:1949, y:2157}
    ],
	
	// =====================================
    // 新增: PIT 站相關座標和路徑
    // =====================================
    // 1. Pit 站入口座標 (玩家/AI 進入 Pit Lane 的點)
    pitEntry: { x: 1977, y: 3620 }, // 假設在直道左側
    // 2. Pit 站停車位座標 (車輛停下換胎的點)
    pitStop: { x: 2160, y: 2031 },  // 假設在這個位置停 3 秒
    // 3. Pit 站出口座標 (玩家/AI 重回賽道的點)
    pitExit: { x: 2031, y: 1020 },
    
    // 4. Pit 站自動駕駛 Waypoints (Pit Lane Path)
    // 這是 AI 和玩家 Auto Drive 時需要遵循的路徑
    pitWaypoints: [
      { x: 1977, y: 3620 }, // 從賽道駛入
      { x: 2100, y: 2800 },
	  { x: 2100, y: 2100 },
      { x: 2100, y: 2031 }, // <-- Pit Stop 停車點
      { x: 2100, y: 1974 },
	  { x: 2100, y: 1474 },
      { x: 1997, y: 1120 }  // Pit 出口 Waypoint
    ],
    // =====================================	
	
    waypoints: [
     {x:1961,y:705},{x:2140,y:417}, {x:2399,y:265}, {x:2695,y:258}, {x:2854,y:440}, 
     {x:2793,y:622}, {x:2596,y:614}, {x:2429,y:690}, {x:2528,y:819}, {x:2778,y:834},
     {x:2930,y:774},{x:3841,y:159}, {x:4031,y:144}, {x:5238,y:204}, {x:5284,y:326}, 
     {x:5200,y:417}, {x:5018,y:553}, {x:3659,y:660}, {x:3469,y:796}, {x:3295,y:1016}, 
     {x:3257,y:1305},{x:3310,y:1540}, {x:3545,y:1775}, {x:3780,y:2003}, {x:3818,y:2322}, 
     {x:2953,y:3156},{x:3014,y:3331}, {x:3165,y:3452}, {x:3363,y:3422}, {x:5891,y:2610}, 
     {x:5967,y:2504},{x:5800,y:2314}, {x:5914,y:2048}, {x:6157,y:2041}, {x:6362,y:2155}, 
     {x:6491,y:2382},{x:6483,y:2686}, {x:6293,y:2906}, {x:417,y:5091}, {x:280,y:5008}, 
     {x:364,y:4849},{x:660,y:4636}, {x:1890,y:4166}, {x:1936,y:4021}, {x:1961,y:1904}
    ],
    originalWidth: 7000,
    originalHeight: 5312
  },
  {
	//2-------------------------------------------------------------------------- 	  
    name: "Le Mans Circuit",
    bgImage: "track/Le_Mans_Circuit.png",
    start: { x:305, y:1876 },  // 圈數檢測線
    playerStart: { x: 327, y: 2376, angle: -Math.PI/2 },
    gridPositions: [  // 11個AI車起跑位（可自訂）
      {x:327, y:1951}, {x:282, y:1994}, {x:327, y:2036}, {x:282, y:2079},
      {x:327, y:2121}, {x:282, y:2164}, {x:327, y:2206}, {x:282, y:2249},
      {x:327, y:2291}, {x:282, y:2334}, {x:327, y:2376}
    ],
	
	// =====================================
    // 新增: PIT 站相關座標和路徑
    // =====================================
    // 1. Pit 站入口座標 (玩家/AI 進入 Pit Lane 的點)
    pitEntry: { x: 339, y: 2676 }, // 假設在直道左側
    // 2. Pit 站停車位座標 (車輛停下換胎的點)
    pitStop: { x: 460, y: 1600 },  // 假設在這個位置停 3 秒
    // 3. Pit 站出口座標 (玩家/AI 重回賽道的點)
    pitExit: { x: 374, y: 1347 },
    
    // 4. Pit 站自動駕駛 Waypoints (Pit Lane Path)
    // 這是 AI 和玩家 Auto Drive 時需要遵循的路徑
    pitWaypoints: [
      { x: 339, y: 2676 }, // 從賽道駛入
      { x: 450, y: 2400 },
	  { x: 450, y: 1680 },
      { x: 450, y: 1600 }, // <-- Pit Stop 停車點
      { x: 450, y: 1550 },
	  { x: 450, y: 1450 },
      { x: 333, y: 1340 }  // Pit 出口 Waypoint
    ],
    // =====================================	
	
    waypoints: [
	{x:305, y:1360}, {x:330, y:1190}, {x:419, y:1104}, {x:546, y:1140}, {x:620, y:1218},
	{x:656, y:1800}, {x:705, y:1868}, {x:763, y:1842}, {x:1561, y:1060}, {x:1691, y:1000},
	{x:1751, y:880}, {x:2162, y:680}, {x:2242, y:420}, {x:2622, y:140}, {x:2772, y:120},
	{x:2979, y:235}, {x:4881, y:5251}, {x:5034, y:6770}, {x:5034, y:6900}, {x:4854, y:6890},
	{x:4063, y:6690}, {x:3283, y:6330}, {x:2772, y:5930}, {x:2702, y:5730}, {x:2362, y:5870},
	{x:1611, y:4380}, {x:1481, y:4260}, {x:1351, y:4250}, {x:1171, y:4390}, {x:1030, y:4440},
	{x:910, y:4330}, {x:770, y:3960}, {x:300, y:3640}, {x:305, y:1960}
    ],
    originalWidth: 5165,
    originalHeight: 7000
  },
  {
	 //3-------------------------------------------------------------------------- 
    name: "Suzuka Circuit",
    bgImage: "track/suzuka-6svg.png",                 // 你儲存為 suzuka.png
    start: { x: 540, y: 1977 },            // 圈數檢測線（過主直道起點）
    playerStart: { x:560, y:2290, angle: -Math.PI/2 },  // 玩家起跑位（最尾）
    gridPositions: [                       // 11 個起跑位（由前到後）
      {x:560, y:2052},  {x:525, y:2080},
      {x:560, y:2098},  {x:525, y:2125},
      {x:560, y:2143}, {x:525, y:2169},
      {x:560, y:2192}, {x:525, y:2220},
      {x:560, y:2240}, {x:525, y:2266},
      {x:560, y:2290}                     // 玩家位置（第11位）
    ],
	
	// =====================================
    // 新增: PIT 站相關座標和路徑
    // =====================================
    // 1. Pit 站入口座標 (玩家/AI 進入 Pit Lane 的點)
    pitEntry: { x: 586, y: 2893 }, // 假設在直道左側
    // 2. Pit 站停車位座標 (車輛停下換胎的點)
    pitStop: { x: 670, y: 1900 },  // 假設在這個位置停 3 秒
    // 3. Pit 站出口座標 (玩家/AI 重回賽道的點)
    pitExit: { x: 582, y: 1480 },
    
    // 4. Pit 站自動駕駛 Waypoints (Pit Lane Path)
    // 這是 AI 和玩家 Auto Drive 時需要遵循的路徑
    pitWaypoints: [
      { x: 586, y: 2893 }, // 從賽道駛入
      { x: 660, y: 2400 },
	  { x: 660, y: 2100 },
      { x: 660, y: 1900 }, // <-- Pit Stop 停車點
      { x: 660, y: 1700},
	  { x: 660, y: 1600},
      { x: 579, y: 1480 }  // Pit 出口 Waypoint
    ],
    // =====================================	
	
    waypoints: [
    {x:540, y:2052},{x:540, y:1800}, {x:540, y:1500},  {x:540, y:1200},
  {x:540, y:1000}, {x:520, y:840},{x:601, y:640},{x:731, y:530},{x:921, y:480},{x:1081, y:540},
	{x:1132, y:670},{x:1112, y:980},{x:1112, y:1290},{x:1222, y:1420},{x:1302, y:1530},
	{x:1302, y:1680},{x:1222, y:1910},{x:1202, y:2060},{x:1362, y:2240},{x:1502, y:2371},
	{x:1502, y:2541},{x:1412, y:2631},{x:1112, y:2821},{x:1041, y:3021},{x:1122, y:3201},
	{x:1272, y:3391},{x:1552, y:3521},{x:1853, y:3561},{x:2264, y:3491},{x:2524, y:3451},
	{x:2795, y:3541},{x:2975, y:3701},{x:3015, y:3821},{x:2965, y:3951},{x:2574, y:4541},
	{x:2234, y:4742},{x:2053, y:4832},{x:2133, y:4922},{x:2314, y:4912},{x:2815, y:4802},
	{x:3185, y:4832},{x:3386, y:4952},{x:3746, y:5512},{x:3786, y:5772},{x:3726, y:5982},
	{x:3596, y:6382},{x:3826, y:6602},{x:4067, y:6622},{x:4207, y:6492},{x:4237, y:6312},
	{x:4107, y:5892},{x:3877, y:5402},{x:3566, y:5022},{x:2955, y:4151},{x:2704, y:3861},
	{x:2333, y:3741},{x:1813, y:3741},{x:1362, y:3781},{x:1202, y:3621},{x:951, y:3571},
	{x:711, y:3431},{x:561, y:2981},{x:540, y:2421}             // 回到起點線
    ],
    originalWidth: 4939,    // 請量度你圖片實際像素寬度
    originalHeight: 7003    // 請量度你圖片實際像素高度
  },
  {
	//4--------------------------------------------------------------------------   
    name: "Brazil Interlagos Circuit",
    bgImage: "track/Interlagos.png",                 // 你儲存為 suzuka.png
    start: { x: 5131, y: 2912 },            // 圈數檢測線（過主直道起點）
    playerStart: { x:5144, y:3252, angle: -Math.PI/2 },  // 玩家起跑位（最尾）
    gridPositions: [                       // 11 個起跑位（由前到後）
      {x:5144, y:3002},  {x:5109, y:3036},
      {x:5144, y:3052},  {x:5109, y:3086},
      {x:5144, y:3102}, {x:5109, y:3136},
      {x:5144, y:3152}, {x:5109, y:3186},
      {x:5144, y:3202}, {x:5109, y:3236},
      {x:5144, y:3252}                     // 玩家位置（第11位）
    ],
	
	// =====================================
    // 新增: PIT 站相關座標和路徑
    // =====================================
    // 1. Pit 站入口座標 (玩家/AI 進入 Pit Lane 的點)
    pitEntry: { x: 5160, y: 3799 }, // 假設在直道左側
    // 2. Pit 站停車位座標 (車輛停下換胎的點)
    pitStop: { x: 5324, y: 2945 },  // 假設在這個位置停 3 秒
    // 3. Pit 站出口座標 (玩家/AI 重回賽道的點)
    pitExit: { x: 5189, y: 1502 },
    
    // 4. Pit 站自動駕駛 Waypoints (Pit Lane Path)
    // 這是 AI 和玩家 Auto Drive 時需要遵循的路徑
    pitWaypoints: [
      { x: 5160, y: 3799 }, // 從賽道駛入
      { x: 5300, y: 3400 },
	  { x: 5300, y: 3100 },
      { x: 5300, y: 2945 }, // <-- Pit Stop 停車點
      { x: 5300, y: 2700 },
	  { x: 5300, y: 1800 },
      { x: 5187, y: 1502 }  // Pit 出口 Waypoint
    ],
    // =====================================	
	
    waypoints: [
	{x:5137, y:2931}, {x:5155, y:1066}, {x:5042, y:735}, {x:4937, y:645}, 
	{x:4757, y:630}, {x:4478, y:773}, {x:4358, y:803}, {x:4215, y:728}, 
	{x:4004, y:517}, {x:3794, y:352}, {x:3546, y:269}, {x:3290, y:231}, 
	{x:3049, y:269}, {x:2899, y:344}, {x:2688, y:457}, {x:2530, y:652}, 
	{x:454, y:3901}, {x:417, y:4037}, {x:417, y:4187}, {x:507, y:4307}, 
	{x:1364, y:4751}, {x:1612, y:4751}, {x:1876, y:4653}, {x:3568, y:3518}, 
	{x:3741, y:3405}, {x:3929, y:3367}, {x:4140, y:3390}, {x:4621, y:3751}, 
	{x:4666, y:3901}, {x:4621, y:4646}, {x:4584, y:4789}, {x:4471, y:4901}, 
	{x:4358, y:4901}, {x:4223, y:4804}, {x:4110, y:4691}, {x:4065, y:4593}, 
	{x:3982, y:4541}, {x:3884, y:4525}, {x:3771, y:4533}, {x:3658, y:4578}, 
	{x:3591, y:4676}, {x:3568, y:4796}, {x:3606, y:4939}, {x:3628, y:4984}, 
	{x:3884, y:5405}, {x:3929, y:5496}, {x:3959, y:5654}, {x:3944, y:6142}, 
	{x:3907, y:6218}, {x:3809, y:6263}, {x:3704, y:6248}, {x:3613, y:6157}, 
	{x:3305, y:5511}, {x:3154, y:5383}, {x:2966, y:5270}, {x:2756, y:5210}, 
	{x:2575, y:5180}, {x:2440, y:5240}, {x:1387, y:6030}, {x:1372, y:6157}, 
	{x:1432, y:6285}, {x:1974, y:6699}, {x:2199, y:6789}, {x:2523, y:6827}, 
	{x:3358, y:6819}, {x:3801, y:6684}, {x:4080, y:6436}, {x:4975, y:4947}, 
	{x:5073, y:4683}, {x:5125, y:4420}, {x:5133, y:2984}             // 回到起點線
    ],
    originalWidth: 5867,    // 請量度你圖片實際像素寬度
    originalHeight: 7009    // 請量度你圖片實際像素高度
  },
  {
	//5--------------------------------------------------------------------------   
    name: "Phoenix Grand Prix Circuit",
    bgImage: "track/Phoenix_Grand_Prix.png",                 // 你儲存為 suzuka.png
    start: { x: 1776, y: 5630 },            // 圈數檢測線（過主直道起點）
    playerStart: { x:1803, y:5882, angle: -Math.PI/2 },  // 玩家起跑位（最尾）
    gridPositions: [                       // 11 個起跑位（由前到後）
      {x:1803, y:5632},  {x:1750, y:5662},
      {x:1803, y:5682},  {x:1750, y:5712},
      {x:1803, y:5732}, {x:1750, y:5762},
      {x:1803, y:5782}, {x:1750, y:5812},
      {x:1803, y:5832}, {x:1750, y:5862},
      {x:1803, y:5882}                     // 玩家位置（第11位）
    ],
	
	// =====================================
    // 新增: PIT 站相關座標和路徑
    // =====================================
    // 1. Pit 站入口座標 (玩家/AI 進入 Pit Lane 的點)
    pitEntry: { x: 1811, y: 5951 }, // 假設在直道左側
    // 2. Pit 站停車位座標 (車輛停下換胎的點)
    pitStop: { x: 1880, y: 5622 },  // 假設在這個位置停 3 秒
    // 3. Pit 站出口座標 (玩家/AI 重回賽道的點)
    pitExit: { x: 1811, y: 5418 },
    
    // 4. Pit 站自動駕駛 Waypoints (Pit Lane Path)
    // 這是 AI 和玩家 Auto Drive 時需要遵循的路徑
    pitWaypoints: [
      { x: 1811, y: 6000 }, // 從賽道駛入
	  { x: 1880, y: 5902 },
      { x: 1880, y: 5622 }, // <-- Pit Stop 停車點
      { x: 1880, y: 5521 },
      { x: 1880, y: 5400},
      { x: 1880, y: 5300 },
      { x: 1811, y: 5150 }  // Pit 出口 Waypoint
    ],
    // =====================================	
	
    waypoints: [
{x:1776,y:5630},{x:1776,y:3040},{x:1816,y:3010},{x:2548,y:3010},{x:2618,y:2970},{x:2618,y:2180},
{x:2558,y:2130},{x:2277,y:2130},{x:2207,y:2060},{x:2207,y:1030},{x:2107,y:950},{x:2016,y:1030},
{x:1976,y:1110},{x:2046,y:1320},{x:2107,y:1600},{x:2107,y:1880},{x:2077,y:2110},{x:1364,y:2550},
{x:1334,y:2600},{x:1334,y:4690},{x:1304,y:4760},{x:973,y:4760},{x:923,y:4810},{x:923,y:5540},
{x:953,y:5580},{x:1254,y:5580},{x:1344,y:5650},{x:1334,y:5990},{x:1424,y:6120},{x:1625,y:6160},
{x:1776,y:5990},{x:1776,y:5750} // 回到起點線
    ],
    originalWidth: 2940,    // 請量度你圖片實際像素寬度
    originalHeight: 7001    // 請量度你圖片實際像素高度
  },
  {
	//6--------------------------------------------------------------------------   
    name: "Yas Marina Circuit",
    bgImage: "track/Yas_Marina_Circuit.png",                 // 你儲存為 suzuka.png
    start: { x: 3753, y:2575 },            // 圈數檢測線（過主直道起點）
    playerStart: { x:3753, y:2825, angle: -Math.PI/2 },  // 玩家起跑位（最尾）
    gridPositions: [                       // 11 個起跑位（由前到後）
      {x:3753, y:2575},  {x:3696, y:2602},
      {x:3753, y:2625},  {x:3696, y:2652},
      {x:3753, y:2675}, {x:3696, y:2702},
      {x:3753, y:2725}, {x:3696, y:2752},
      {x:3753, y:2775}, {x:3696, y:2802},
      {x:3753, y:2825}                     // 玩家位置（第11位）
    ],
	
	// =====================================
    // 新增: PIT 站相關座標和路徑
    // =====================================
    // 1. Pit 站入口座標 (玩家/AI 進入 Pit Lane 的點)
    pitEntry: { x: 3853, y: 3322 }, // 假設在直道左側
    // 2. Pit 站停車位座標 (車輛停下換胎的點)
    pitStop: { x: 3782, y: 2078 },  // 假設在這個位置停 3 秒
    // 3. Pit 站出口座標 (玩家/AI 重回賽道的點)
    pitExit: { x: 3662, y: 1225 },
    
    // 4. Pit 站自動駕駛 Waypoints (Pit Lane Path)
    // 這是 AI 和玩家 Auto Drive 時需要遵循的路徑
    pitWaypoints: [
      { x: 3917, y: 3316 }, // 從賽道駛入
      { x: 3830, y: 3180 },
	  { x: 3830, y: 2800 },
      { x: 3830, y: 2078 }, // <-- Pit Stop 停車點
      { x: 3830, y: 1470 },
	  { x: 3830, y: 1280 },
      { x: 3642, y: 1235 }  // Pit 出口 Waypoint
    ],
    // =====================================	
	
    waypoints: [
{x:3720,y:2543},{x:3706,y:1335},{x:3566,y:1229},{x:2962,y:1300},{x:2822,y:1370},{x:2576,y:1784},
{x:2365,y:1932},{x:1909,y:1813},{x:1474,y:1728},{x:568,y:1721},{x:407,y:1883},{x:540,y:1995},
{x:3952,y:3717},{x:4106,y:3773},{x:4127,y:3527},{x:4520,y:3443},{x:4822,y:3330},{x:5770,y:2403},
{x:6423,y:1440},{x:6437,y:1131},{x:6205,y:969},{x:5931,y:1025},{x:5784,y:1293},{x:5798,y:1932},
{x:5566,y:2283},{x:5447,y:2424},{x:5068,y:2466},{x:5012,y:2459},{x:4991,y:2094},{x:4935,y:2030},
{x:4682,y:1995},{x:4541,y:2030},{x:4499,y:2213},{x:4499,y:3000},{x:4429,y:3127},{x:3938,y:3337},
{x:3727,y:3260},{x:3720,y:2740}
 // 回到起點線
    ],
    originalWidth: 7020,    // 請量度你圖片實際像素寬度
    originalHeight: 4111    // 請量度你圖片實際像素高度
  },
  {
	//7--------------------------------------------------------------------------   
    name: "Adelaide (long_route) Circuit",
    bgImage: "track/Adelaide_(long_route).png",                 // 你儲存為 suzuka.png
    start: { x:2157, y:5326 },            // 圈數檢測線（過主直道起點）
    playerStart: { x:2157, y:5576, angle: -Math.PI/2 },  // 玩家起跑位（最尾）
    gridPositions: [                       // 11 個起跑位（由前到後）
      {x:2157, y:5326},  {x:2114, y:5350},
      {x:2157, y:5376},  {x:2114, y:5400},
      {x:2157, y:5426}, {x:2114, y:5450},
      {x:2157, y:5476}, {x:2114, y:5500},
      {x:2157, y:5526}, {x:2114, y:5600},
      {x:2157, y:5576}                     // 玩家位置（第11位）
    ],
	
	// =====================================
    // 新增: PIT 站相關座標和路徑
    // =====================================
    // 1. Pit 站入口座標 (玩家/AI 進入 Pit Lane 的點)
    pitEntry: { x: 2132, y: 6193 }, // 假設在直道左側
    // 2. Pit 站停車位座標 (車輛停下換胎的點)
    pitStop: { x: 2222, y: 5118 },  // 假設在這個位置停 3 秒
    // 3. Pit 站出口座標 (玩家/AI 重回賽道的點)
    pitExit: { x: 2189, y: 4777 },
    
    // 4. Pit 站自動駕駛 Waypoints (Pit Lane Path)
    // 這是 AI 和玩家 Auto Drive 時需要遵循的路徑
    pitWaypoints: [
      { x: 2142, y: 6193 }, // 從賽道駛入
      { x: 2180, y: 6168 },
	  { x: 2250, y: 5701 },
      { x: 2250, y: 5518 }, // <-- Pit Stop 停車點
      { x: 2250, y: 5276 },
	  { x: 2232, y: 5019 },
      { x: 2189, y: 4777 }  // Pit 出口 Waypoint
    ],
    // =====================================	
	
    waypoints: [
{x:2141,y:5353},{x:2141,y:4483},{x:2131,y:4333},{x:2041,y:4152},{x:1891,y:3852},{x:1131,y:3282},
{x:1050,y:3162},{x:1121,y:3062},{x:1301,y:2812},{x:1291,y:2661},{x:930,y:2361},{x:950,y:2251},
{x:1451,y:1581},{x:1501,y:1411},{x:1471,y:1240},{x:1661,y:880},{x:1771,y:850},{x:2692,y:1501},
{x:2832,y:1621},{x:3423,y:4913},{x:3343,y:5003},{x:3283,y:4953},{x:3062,y:4723},{x:2702,y:4643},
{x:2562,y:4753},{x:2462,y:5103},{x:2542,y:5704},{x:2482,y:5924},{x:2242,y:6274},{x:2111,y:6274},
{x:2141,y:5684}  // 回到起點線
    ],
    originalWidth: 4314,    // 請量度你圖片實際像素寬度
    originalHeight: 7005    // 請量度你圖片實際像素高度
  }
];

// 一定要加這行！讓我們永遠有原始中心線可用
TRACKS.forEach(track => track._originalWaypoints = [...track.waypoints]);